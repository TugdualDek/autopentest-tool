from core.action_engine import ActionEngine
from core.config_loader import ConfigLoader
from core.variable_manager import VariableManager

class Kernel:
    def __init__(self):
        self.config_loader = ConfigLoader()
        self.variable_manager = VariableManager()
        self.action_engine = ActionEngine(self.variable_manager)

    def initialize(self, config_file):
        config = self.config_loader.load_config(config_file)
        self.action_engine.load_plugins()
        return config

    def run(self, workflow_file):
        config = self.initialize(workflow_file)
        workflow = self.config_loader.load_workflow(workflow_file)
        self.variable_manager.set_variables(workflow.get('variables', {}))
        self.action_engine.execute_workflow(workflow, config)
